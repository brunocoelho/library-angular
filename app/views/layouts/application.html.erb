<!DOCTYPE html>
<html lang="en" data-ng-app="libraryApp">
  <head>
    <title>Library</title>
    <%= stylesheet_link_tag "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
  </head>
  <body data-ng-class="{ loading: loadingView }">

    <div class="logo-wrapper">
      <img src="../assets/bookle.gif">
    </div>

    <% if !user_signed_in? %>
      <a class="github-ribbon" href="https://github.com/brunocoelho/library-angular/">
        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub">
      </a>
    <% end %>

    <div class="container-fluid" id="topbar">
      <div class="row-fluid" data-ng-controller="ApplicationCtrl">
        <div class="span2" >
          <!--Search content-->

          <% if user_signed_in? %>
            <form class="form-search" data-ng-submit="searchBooks()">
              <fieldset>
                <div class="control-group">
                    <div class="controls">
                      <input type="text" class="input-medium search-query" data-ng-model="query" placeholder="Search...">
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                  </div>
              </fieldset>
            </form>
          <% end %>

        </div>

        <div class="span9">
          <!--Body content-->

          <div class="login">
            <%= yield %>
          </div>

          <% if user_signed_in? %>
            <div data-ng-view></div>
          <% end %>
        </div>

        <div class="span1 logout">
          <!--Logout content-->

          <% if user_signed_in? %>
            <%= link_to 'Sign out', destroy_user_session_path,
              method: :delete, title: 'Sign out', :'data-placement' => "below", :'data-ng-click' => "setLoadingFalse()" %>
          <% end %>
        </div>

      </div>
    </div>

    <div class="loader"></div>
  </body>
</html>
